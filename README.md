# DLIO: Source Code for Determining the Entropy and Compression Ratio Relationship

# Developers

## Version Control

This repository uses `git lfs` and thus it must be installed in your system
to work on this project.

To install `git lfs` please see this [github documentation](https://docs.github.com/en/repositories/working-with-files/managing-large-files/installing-git-large-file-storage)

The following code within `.gitattributes` sets the git lfs to track .jpg files.

```
*.jpg filter=lfs diff=lfs merge=lfs -text

```

## Directory Structure

### results

Within the results dir, all of the outputs or plots generated by the scripts should be stored in a subdir
that is named by its date of generation by using the following standard in numeric form: `YEAR-MONTH-DATE`.
For example a plot generated on March 14, 2024, the subdir name to house the plot should be `2024-03-14`.

## Preparing Environment

I would recommend using a `conda` virtual environment or use a docker container in order to develop on this project.

Note: The `environment.yml` is used to setup the conda env.

### Using Conda for Local Env

#### How to Install Conda

Please see the conda documentation for the installation of conda env [here](https://conda.io/projects/conda/en/latest/user-guide/install/index.html)

For `macos` users you can install conda using the following commands:

```
brew install --cask anaconda

```

#### Setting Up Conda Env

Run the following command after you have conda installed:

```
conda env create -f environment.yml

conda activate base

```

##### Troubleshooting

If there was an error creating the conda environment, create the env from scratch instead. The
following code uses conda.

```
conda env create --name <NAME_OF_ENV>

```

After the creation make sure that `pip` is installed in the virtual environment and
the pip that will be used is the one from the virtual environment.

```
which pip
```

If the path of the pip is within the venv, then you are set to run `pip install -r requirements.txt`
This will install of the the dependencies necessary.

### Using Docker

An alternative to setting up the conda environment on your local machine is to create a docker image and running the docker image on a docker container.

#### Installing Docker

To install docker please see the docker offical documentation on installation [here](https://docs.docker.com/engine/install/).

#### Running Docker

The dockerimage is to be run using the interactive mode so that each python script can be run
using the docker attached terminal instead of having a default script to be run.

To run use the following command:

```
docker-compose up -d

docker-compose exec python_container bash
```

#### Closing Docker

To close the docker interactive shell, simply enter `exit`. Then
you will have to run `docker-compose down` to close the container.

#### Git with Docker

If you would like to commit while in your docker repo, you have to set your
git config for `user.name` and `user.email`.

## How to Use

The basis of running the code comes from the class `ECrRelation`. To initiate a
`ECrRelation` object, you will need input three arguments.

Firstly, the `.json` path where all of the absolute image paths are stored.
DO NOT INPUT RELATIVE PATH.

```
{ "paths": [
  "/ABSOLUTE_PATH_TO_IMAGE",
  ...

```

Secondly, you will need the name of the save directory. The two types currently
available are `local` and `polaris`.

Lastly, you will need to provide an array of strings of the type of compression.
The two compression file types currently supported are `npz` and `.jpg`.

### Running the Code

When running make sure to run in the root dir.
